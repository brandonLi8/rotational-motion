name: Deploy

on:
  push:
    branches:    
      - production

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Setup Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v1
      with:
        node-version: '12.x'

    - run: npm prune -production=true
    - run: npm cache clean --f
    - run: npm install

    - name: Lint
      run: grunt eslint --no-cache  

    - name: Deploy to Heroku
      env:
        HEROKU_API_TOKEN: ${{ secrets.HEROKU_API_TOKEN }}
        HEROKU_APP_NAME: "your-app-name-here"
      if: github.ref == 'refs/heads/master' && job.status == 'success'
      run: git push https://heroku:$HEROKU_API_TOKEN@git.heroku.com/$HEROKU_APP_NAME.git origin/master:master       
# Copyright Â© 2019 Brandon Li. All rights reserved.

#====================================================================================================
#
# IMPORTANT: This file was generated by `grunt generate-travis`. This file SHOULD NOT be modified. Your package.json
#            determines the content of this file. See `../grunt-commands/generate.js` for documentation on setup.
#
# IMPORTANT: `grunt generate-travis` is a custom command (Found
#            https://github.com/brandonLi8/grunt-config/Gruntfile.js). Your repository's
#            Gruntfile must extend to this Gruntfile to run the command.
#
# Entry point for travis-cli.org. This file instructs travis-ci.org to solely check that every branch can be 'built' by
# checking if everything can be linted. This is to prevent rogue commits/merges on this project that aren't linted.
#
# @author Brandon Li brandon.li820@gmail.com
#
#====================================================================================================
